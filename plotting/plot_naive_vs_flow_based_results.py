"""
Plotting script for graph-dp edge count algorithm errors.
"""
import pandas as pd
import matplotlib.pyplot as plt
import numpy as np


csfont = {'fontname':'cmr10'}
plt.rcParams.update({'font.size': 22})
# plot
fig = plt.figure(figsize = (10, 5))
plt.style.use('ggplot')

# number of bars is the number of bounds D tried plus the naive error plus the case were D = n ** (1 / alpha)
num_bars = 1 + 7 + 1
x = np.arange(num_bars)

# numbers generated by running ../naive_vs_flow_based_dp_edge_count.py
avg_absolute_error = [9803.458, 2649.180, 1705.001, 1437.408, 1277.840, 1500.671, 1587.414, 2028.415, 2301.866]
y_errormin = [861.440, 2117.967, 647.059, 147.988, 136.641, 134.266, 95.825, 103.861, 121.663]
y_errormax = [26279.542, 3364.366,  2701.643, 3283.356, 3757.613, 4040.863, 4969.753, 5336.955, 7263.592]
y_errormin = [avg_absolute_error[i] - y_errormin[i] for i in range(len(avg_absolute_error))]
y_errormax = [y_errormax[i] - avg_absolute_error[i] for i in range(len(avg_absolute_error))]
y_error = [y_errormin, y_errormax]

width = 0.7
plt.bar(x, avg_absolute_error, width, color='maroon', alpha=0.78)
plt.errorbar(x, avg_absolute_error, yerr=y_error, fmt='o', color='#1A807C')
plt.title("Absolute Mean Error of DP Edge Count Algorithms", fontsize=18, **csfont)
plt.ylabel("Average Mean Error", fontsize=16, **csfont)

# D choices
bounds = [141, 280, 419, 558, 697, 836, 976]
xtick_labels = ['naive'] + ['D = ' + str(i) for i in bounds] + ['D = n ** (1 / alpha)']
xtick_labels = [xtick.upper() for xtick in xtick_labels]
plt.xticks(x, xtick_labels, rotation=25, ha='right', fontsize=13, **csfont)
plt.yticks(fontsize=14, **csfont)

plt.savefig('../../analysis/plots/naive_vs_flow_based2.png', dpi=300, bbox_inches="tight")
